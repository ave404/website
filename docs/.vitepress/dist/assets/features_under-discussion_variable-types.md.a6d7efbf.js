import{_ as n,c as l,b as s,d as e,e as t,a as p,o,r}from"./app.e13f5bad.js";const v=JSON.parse('{"title":"Variable Types","description":"","frontmatter":{},"headers":[{"level":2,"title":"Syntax choice","slug":"syntax-choice","link":"#syntax-choice","children":[{"level":3,"title":"<type> <variable>","slug":"type-variable","link":"#type-variable","children":[]},{"level":3,"title":"<variable>: <type>","slug":"variable-type","link":"#variable-type","children":[]}]},{"level":2,"title":"Runtime","slug":"runtime","link":"#runtime","children":[]},{"level":2,"title":"Type inference","slug":"type-inference","link":"#type-inference","children":[]}],"relativePath":"features/under-discussion/variable-types.md","lastUpdated":1673369101000}'),i={name:"features/under-discussion/variable-types.md"},c={id:"variable-types",tabindex:"-1"},d=s("a",{class:"header-anchor",href:"#variable-types","aria-hidden":"true"},"#",-1),y=p(`<p>Variables in PHP can hold values of any type and the type of held value can change over time.</p><div class="language-php line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hello, world!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>This can be useful, but there are use cases for statically typing variables too. This proposal for PXP would introduce a new <code>var</code> statement that can be used to declare a variable with a static type.</p><div class="language-pxp line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">pxp</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Here is a pseudo-grammar represenation of the statement.</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">&quot;var&quot; &lt;type&gt; &lt;variable&gt; (&quot;=&quot; &lt;expression&gt;?) &quot;;&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="syntax-choice" tabindex="-1">Syntax choice <a class="header-anchor" href="#syntax-choice" aria-hidden="true">#</a></h2><p>The <code>var</code> keyword has been chosen since it already exists in PHP and therefore avoids a new keyword such as <code>let</code>. It also helps to avoid ambiguity in the parser.</p><p>Other candidates for syntax are discussed below:</p><h3 id="type-variable" tabindex="-1"><code>&lt;type&gt; &lt;variable&gt;</code> <a class="header-anchor" href="#type-variable" aria-hidden="true">#</a></h3><p>An alternative syntax for this feature is <code>int $i = 0</code>.</p><p>This syntax is the closest to parameter and property types where the type directly precedes the variable without an form of designation keyword (<code>var</code> / <code>let</code>).</p><p>The main problem this syntax introduces in ambiguity. For example, <code>require $var</code> would require some additional parser checks to ensure it doesn&#39;t attempt to parse this as a variable type declaration.</p><h3 id="variable-type" tabindex="-1"><code>&lt;variable&gt;: &lt;type&gt;</code> <a class="header-anchor" href="#variable-type" aria-hidden="true">#</a></h3><p>The <code>$i: int = 0;</code> syntax is more inline with other programming languages such as TypeScript and Rust, but it stands out amongst other PHP code since the only other type declaration that uses a single colon is return types.</p><p>For consistency with existing PHP syntax, it doesn&#39;t make much sense to go with this syntax.</p><h2 id="runtime" tabindex="-1">Runtime <a class="header-anchor" href="#runtime" aria-hidden="true">#</a></h2><p>By default, PXP will only analyse variable usage and assignment statically. The generated PHP code will still be dynamic, so if you choose to build without analysing first, you could still run into unexpected behaviour at runtime.</p><p>There are plans to introduce runtime type checks for variables as well. This is achievable with existing PHP structures, but would introduce a potential performance overhead.</p><div class="language-php line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">})();</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(\\</span><span style="color:#FFCB6B;">TypeError</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// Rethrow here with a better message specific to the variable assignment.</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="type-inference" tabindex="-1">Type inference <a class="header-anchor" href="#type-inference" aria-hidden="true">#</a></h2><p>There are no plans to support type inference for typed variables at this moment in time.</p>`,22);function h(u,D,b,C,m,F){const a=r("Badge");return o(),l("div",null,[s("h1",c,[e("Variable Types "),t(a,{type:"warning",text:"under discussion"}),e(),d]),y])}const g=n(i,[["render",h]]);export{v as __pageData,g as default};
